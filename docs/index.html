<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Entropy-Based Segregation Indices • segregation</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Entropy-Based Segregation Indices">
<meta property="og:description" content="Computes entropy-based segregation indices, as developed by
    Theil (1971) &lt;isbn:978-0471858454&gt;, with a focus on
    the Mutual Information Index (M) and Theil's Information Index (H).
    The M, further described by Mora and Ruiz-Castillo (2011) &lt;doi:10.1111/j.1467-9531.2011.01237.x&gt;
    and Frankel and Volij (2011) &lt;doi:10.1016/j.jet.2010.10.008&gt;,
    is a measure of segregation that is highly decomposable. The package provides
    tools to decompose the index by units and groups (local segregation),
    and by within and between terms.
    Includes standard error estimation by bootstrapping.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">segregation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/elbersb/segregation">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="segregation" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#segregation" class="anchor"></a>segregation</h1></div>

<p>An R package to calculate and decompose entropy-based, multigroup segregation indices, with a focus on the Mutual Information Index (M) and Theil’s Information Index (H).</p>
<p>Find more information in the <a href="https://elbersb.de/segregation">documentation</a>.</p>
<ul>
<li>calculate total, between, within, and local segregation</li>
<li>decompose differences in total segregation over time</li>
<li>estimate standard errors via bootstrapping</li>
<li>every method returns a <a href="http://vita.had.co.nz/papers/tidy-data.html">tidy</a> <a href="http://r-datatable.com">data.table</a> for easy post-processing and plotting</li>
<li>it’s fast, because it uses the <a href="https://github.com/Rdatatable/data.table/wiki"><code>data.table</code></a> package internally</li>
</ul>
<p>Most of the procedures implemented in this package are described in more detail <a href="https://osf.io/preprints/socarxiv/ya7zs/">in this working paper</a>.</p>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The package provides an easy way to calculate segregation measures, based on the Mutual Information Index (M) and Theil’s Entropy Index (H).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(segregation)</span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># example dataset with fake data provided by the package</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw"><a href="reference/mutual_total.html">mutual_total</a></span>(schools00, <span class="st">"race"</span>, <span class="st">"school"</span>, <span class="dt">weight =</span> <span class="st">"n"</span>)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">#&gt;  stat   est</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">#&gt;     M 0.426</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">#&gt;     H 0.419</span></span></code></pre></div>
<p>Standard errors in all functions can be estimated via boostrapping:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="reference/mutual_total.html">mutual_total</a></span>(schools00, <span class="st">"race"</span>, <span class="st">"school"</span>, <span class="dt">weight =</span> <span class="st">"n"</span>, <span class="dt">se =</span> <span class="ot">TRUE</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co">#&gt; 100 bootstrap iterations on 877739 observations</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">#&gt;  stat   est       se</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt;     M 0.429 0.000796</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt;     H 0.422 0.000689</span></span></code></pre></div>
<p>Decompose segregation into a between-state and a within-state term (the sum of these equals total segregation):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># between states</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw"><a href="reference/mutual_total.html">mutual_total</a></span>(schools00, <span class="st">"race"</span>, <span class="st">"state"</span>, <span class="dt">weight =</span> <span class="st">"n"</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt;  stat    est</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt;     M 0.0992</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt;     H 0.0977</span></span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># within states</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="kw"><a href="reference/mutual_total.html">mutual_total</a></span>(schools00, <span class="st">"race"</span>, <span class="st">"school"</span>, <span class="dt">within =</span> <span class="st">"state"</span>, <span class="dt">weight =</span> <span class="st">"n"</span>)</span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt;  stat   est</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt;     M 0.326</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt;     H 0.321</span></span></code></pre></div>
<p>Local segregation (<code>ls</code>) is a decomposition by units (here racial groups). The sum of the proportion-weighted local segregation scores equals M:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>(local &lt;-<span class="st"> </span><span class="kw"><a href="reference/mutual_local.html">mutual_local</a></span>(schools00, <span class="dt">group =</span> <span class="st">"school"</span>, <span class="dt">unit =</span> <span class="st">"race"</span>, <span class="dt">weight =</span> <span class="st">"n"</span>,</span>
<span id="cb4-2"><a href="#cb4-2"></a>             <span class="dt">se =</span> <span class="ot">TRUE</span>, <span class="dt">wide =</span> <span class="ot">TRUE</span>))</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt; 100 bootstrap iterations on 877739 observations</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt;    race    ls    ls_se      p      p_se</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt;   asian 0.666 0.005636 0.0226 0.0001459</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt;   black 0.885 0.002080 0.1901 0.0003918</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt;    hisp 0.782 0.002116 0.1517 0.0004028</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt;   white 0.184 0.000518 0.6281 0.0005175</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#&gt;  native 1.519 0.016045 0.0075 0.0000854</span></span>
<span id="cb4-10"><a href="#cb4-10"></a></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(local<span class="op">$</span>p <span class="op">*</span><span class="st"> </span>local<span class="op">$</span>ls)</span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt; [1] 0.429</span></span></code></pre></div>
<p>Decompose the difference in M between 2000 and 2005, using iterative proportional fitting (IPF) and the Shapley decomposition, as suggested by Karmel and Maclachlan (1988) and Deutsch et al. (2006):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="reference/mutual_difference.html">mutual_difference</a></span>(schools00, schools05, <span class="dt">group =</span> <span class="st">"race"</span>, <span class="dt">unit =</span> <span class="st">"school"</span>,</span>
<span id="cb5-2"><a href="#cb5-2"></a>                  <span class="dt">weight =</span> <span class="st">"n"</span>, <span class="dt">method =</span> <span class="st">"shapley"</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt;            stat      est</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt;              M1  0.42554</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt;              M2  0.41339</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt;            diff -0.01215</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;       additions -0.00341</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;        removals -0.01141</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt;  group_marginal  0.01787</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt;   unit_marginal -0.01171</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;      structural -0.00349</span></span></code></pre></div>
<p>Find more information in the <a href="https://elbersb.de/segregation">documentation</a>.</p>
</div>
<div id="how-to-install" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-install" class="anchor"></a>How to install</h2>
<p>To install the package from CRAN, use</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"segregation"</span>)</span></code></pre></div>
<p>To install the development version, use</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>devtools<span class="op">::</span><span class="kw"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"elbersb/segregation"</span>)</span></code></pre></div>
</div>
<div id="papers-using-the-mutual-information-index" class="section level2">
<h2 class="hasAnchor">
<a href="#papers-using-the-mutual-information-index" class="anchor"></a>Papers using the Mutual information index</h2>
<p>(list incomplete)</p>
<p>DiPrete, T. A., Eller, C. C., Bol, T., &amp; van de Werfhorst, H. G. (2017). School-to-Work Linkages in the United States, Germany, and France. American Journal of Sociology, 122(6), 1869-1938. <a href="https://doi.org/10.1086/691327" class="uri">https://doi.org/10.1086/691327</a></p>
<p>Forster, A. G., &amp; Bol, T. (2017). Vocational education and employment over the life course using a new measure of occupational specificity. Social Science Research, 70, 176-197. <a href="https://doi.org/10.1016/j.ssresearch.2017.11.004" class="uri">https://doi.org/10.1016/j.ssresearch.2017.11.004</a></p>
<p>Van Puyenbroeck, T., De Bruyne, K., &amp; Sels, L. (2012). More than ‘Mutual Information’: Educational and sectoral gender segregation and their interaction on the Flemish labor market. Labour Economics, 19(1), 1-8. <a href="https://doi.org/10.1016/j.labeco.2011.05.002" class="uri">https://doi.org/10.1016/j.labeco.2011.05.002</a></p>
<p>Mora, R., &amp; Ruiz-Castillo, J. (2003). Additively decomposable segregation indexes. The case of gender segregation by occupations and human capital levels in Spain. The Journal of Economic Inequality, 1(2), 147-179. <a href="https://doi.org/10.1023/A:1026198429377" class="uri">https://doi.org/10.1023/A:1026198429377</a></p>
</div>
<div id="references-on-entropy-based-segregation-indices" class="section level2">
<h2 class="hasAnchor">
<a href="#references-on-entropy-based-segregation-indices" class="anchor"></a>References on entropy-based segregation indices</h2>
<p>Deutsch, J., Flückiger, Y. &amp; Silber, J. (2009). Analyzing Changes in Occupational Segregation: The Case of Switzerland (1970–2000), in: Yves Flückiger, Sean F. Reardon, Jacques Silber (eds.) Occupational and Residential Segregation (Research on Economic Inequality, Volume 17), 171–202.</p>
<p>Elbers, B. (2019). A Method for Studying Difference in Segregation Levels Across Time and Space. SocArXiv Working Paper. <a href="https://osf.io/preprints/socarxiv/ya7zs/" class="uri">https://osf.io/preprints/socarxiv/ya7zs/</a></p>
<p>Theil, H. (1971). Principles of Econometrics. New York: Wiley.</p>
<p>Frankel, D. M., &amp; Volij, O. (2011). Measuring school segregation. Journal of Economic Theory, 146(1), 1-38. <a href="https://doi.org/10.1016/j.jet.2010.10.008" class="uri">https://doi.org/10.1016/j.jet.2010.10.008</a></p>
<p>Mora, R., &amp; Ruiz-Castillo, J. (2009). The Invariance Properties of the Mutual Information Index of Multigroup Segregation, in: Yves Flückiger, Sean F. Reardon, Jacques Silber (eds.) Occupational and Residential Segregation (Research on Economic Inequality, Volume 17), 33-53.</p>
<p>Mora, R., &amp; Ruiz-Castillo, J. (2011). Entropy-based Segregation Indices. Sociological Methodology, 41(1), 159–194. <a href="https://doi.org/10.1111/j.1467-9531.2011.01237.x" class="uri">https://doi.org/10.1111/j.1467-9531.2011.01237.x</a></p>
<p>Karmel, T. &amp; Maclachlan, M. (1988). Occupational Sex Segregation — Increasing or Decreasing? Economic Record 64: 187-195. <a href="https://doi.org/10.1111/j.1475-4932.1988.tb02057.x" class="uri">https://doi.org/10.1111/j.1475-4932.1988.tb02057.x</a></p>
<p>Watts, M. The Use and Abuse of Entropy Based Segregation Indices. Working Paper. URL: <a href="http://www.ecineq.org/ecineq_lux15/FILESx2015/CR2/p217.pdf" class="uri">http://www.ecineq.org/ecineq_lux15/FILESx2015/CR2/p217.pdf</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=segregation">https://​cloud.r-project.org/​package=segregation</a>
</li>
<li>Browse source code at <br><a href="https://github.com/elbersb/segregation">https://​github.com/​elbersb/​segregation</a>
</li>
<li>Report a bug at <br><a href="http://github.com/elbersb/segregation/issues">http://​github.com/​elbersb/​segregation/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Benjamin Elbers <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5392-3448" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=segregation"><img src="https://www.r-pkg.org/badges/version/segregation" alt="CRAN Version"></a></li>
<li><a href="https://travis-ci.org/elbersb/segregation"><img src="https://travis-ci.org/elbersb/segregation.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/github/elbersb/segregation?branch=master"><img src="https://codecov.io/gh/elbersb/segregation/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Benjamin Elbers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
